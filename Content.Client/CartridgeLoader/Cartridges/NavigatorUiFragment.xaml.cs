using Content.Client.Pinpointer.UI;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface;
using Robust.Client.UserInterface.Controls;
using Robust.Client.UserInterface.XAML;

namespace Content.Client.CartridgeLoader.Cartridges;

[GenerateTypedNameReferences]
public sealed partial class NavigatorUiFragment : BoxContainer
{
    public NavMapControl? NavMap;

    public NavigatorUiFragment()
    {
        RobustXamlLoader.Load(this);
    }

    public void Setup(EntityUid? owner)
    {
        NavMap = new NavMapControl();
        NavMap.Owner = owner;
        NavMap.HorizontalExpand = true;
        NavMap.VerticalExpand = true;

        NavMapContainer.AddChild(NavMap);
    }

    public void UpdateState(EntityUid? mapUid, string stationName)
    {
        StationNameLabel.Text = stationName;

        if (NavMap != null && mapUid != null)
        {
            NavMap.MapUid = mapUid;
        }
    }
}
